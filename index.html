<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ø³ÙˆÙ‚ Ù‡ÙˆÙˆØ§Ø´Ø© - Ø§Ù„Ù†Ø³Ø®Ø© Ø§Ù„Ø§Ø­ØªØ±Ø§ÙÙŠØ©</title>
    <script src="https://sdk.minepi.com/pi-sdk.js"></script>
    <style>
        :root { --main: #1a1a1a; --accent: #e67e22; --bg: #fdfdfd; }
        body { font-family: 'Segoe UI', Tahoma, sans-serif; background: var(--bg); margin: 0; padding-bottom: 80px; }
        header { background: var(--main); color: white; padding: 25px; text-align: center; }
        nav { background: #fff; padding: 12px; text-align: center; position: sticky; top: 0; z-index: 1000; box-shadow: 0 2px 10px rgba(0,0,0,0.05); }
        .nav-link { color: var(--main); text-decoration: none; margin: 0 6px; font-weight: bold; cursor: pointer; padding: 10px 18px; border-radius: 25px; display: inline-block; transition: 0.3s; border: 1px solid #eee; font-size: 0.9em; }
        .nav-link.active { background: var(--main); color: white; border-color: var(--main); }
        .section { display: none; padding: 30px 15px; max-width: 1200px; margin: auto; }
        .section.active { display: block; animation: fadeIn 0.4s ease; }
        @keyframes fadeIn { from { opacity: 0; } to { opacity: 1; } }
        .container { display: grid; grid-template-columns: repeat(auto-fill, minmax(260px, 1fr)); gap: 20px; }
        .card { background: white; border-radius: 18px; overflow: hidden; box-shadow: 0 6px 20px rgba(0,0,0,0.04); transition: 0.4s; border: 1px solid #f0f0f0; display: flex; flex-direction: column; }
        .card img { width: 100%; height: 220px; object-fit: contain; padding: 15px; box-sizing: border-box; }
        .card-info { padding: 15px; text-align: center; }
        .price { color: var(--accent); font-weight: bold; font-size: 1.3em; display: block; margin-bottom: 12px; }
        .btn { background: #f8f8f8; color: var(--main); border: none; padding: 12px; border-radius: 10px; cursor: pointer; width: 100%; font-weight: bold; transition: 0.2s; border: 1px solid #eee; }
        .btn:hover { background: var(--main); color: white; }
        .cart-mini { position: fixed; bottom: 20px; left: 20px; background: var(--main); color: white; padding: 10px 20px; border-radius: 30px; box-shadow: 0 5px 15px rgba(0,0,0,0.2); z-index: 2000; font-size: 0.9em; display: flex; align-items: center; gap: 8px; }
    </style>
</head>
<body>

<header>
    <h1>Ø³ÙˆÙ‚ Ù‡ÙˆÙˆØ§Ø´Ø© Ø§Ù„ØªØ¬Ø§Ø±ÙŠ</h1>
</header>

<nav>
    <div class="nav-link active" onclick="showSection('appliances', this)">Ø§Ù„Ø£Ø¬Ù‡Ø²Ø©</div>
    <div class="nav-link" onclick="showSection('cars', this)">Ø§Ù„Ø³ÙŠØ§Ø±Ø§Øª</div>
    <div class="nav-link" onclick="showSection('phones', this)">Ø§Ù„Ù‡ÙˆØ§ØªÙ</div>
    <div class="nav-link" onclick="showSection('realestate', this)">Ø§Ù„Ø¹Ù‚Ø§Ø±Ø§Øª</div>
</nav>

<div id="appliances" class="section active">
    <div class="container">
        <div class="card"><img src="images/air_conditioner.jpg"><div class="card-info"><h3>Ù…ÙƒÙŠÙ Ù‡ÙˆØ§Ø¡</h3><span class="price">0.01 Pi</span><button class="btn" onclick="onBuy(0.01, 'Ù…ÙƒÙŠÙ Ù‡ÙˆØ§Ø¡')">Ø´Ø±Ø§Ø¡ ØªØ¬Ø±ÙŠØ¨ÙŠ</button></div></div>
        <div class="card"><img src="images/coffee_machine.jpg"><div class="card-info"><h3>Ù…Ø§ÙƒÙŠÙ†Ø© Ù‚Ù‡ÙˆØ©</h3><span class="price">0.01 Pi</span><button class="btn" onclick="onBuy(0.01, 'Ù…Ø§ÙƒÙŠÙ†Ø© Ù‚Ù‡ÙˆØ©')">Ø´Ø±Ø§Ø¡ ØªØ¬Ø±ÙŠØ¨ÙŠ</button></div></div>
    </div>
</div>

<div class="cart-mini">ğŸ›’ Ø§Ù„Ø­Ø§Ù„Ø©: <span id="status">Ø¬Ø§Ù‡Ø² Ù„Ù„Ø§Ø®ØªØ¨Ø§Ø±</span></div>

<script>
    // ØªÙ‡ÙŠØ¦Ø© Pi SDK ÙÙŠ ÙˆØ¶Ø¹ Ø§Ù„ØªØ¬Ø±Ø¨Ø©
    Pi.init({ version: "2.0", sandbox: true });

    function showSection(id, el) {
        document.querySelectorAll('.section').forEach(s => s.classList.remove('active'));
        document.querySelectorAll('.nav-link').forEach(n => n.classList.remove('active'));
        document.getElementById(id).classList.add('active');
        el.classList.add('active');
    }

    async function onBuy(amount, itemName) {
        try {
            document.getElementById('status').innerText = "Ø¬Ø§Ø±ÙŠ Ø§Ù„Ø§ØªØµØ§Ù„ Ø¨Ø§Ù„Ù…Ø­ÙØ¸Ø©...";
            const payment = await Pi.createPayment({
                amount: amount,
                memo: "ØªØ¬Ø±Ø¨Ø© Ø´Ø±Ø§Ø¡: " + itemName,
                metadata: { item: itemName }
            }, {
                onReadyForServerApproval: (paymentId) => { console.log("Payment Ready:", paymentId); },
                onReadyForServerCompletion: (paymentId, txid) => {
                    document.getElementById('status').innerText = "ØªÙ…Øª Ø§Ù„Ø¹Ù…Ù„ÙŠØ©!";
                    alert("Ø´ÙƒØ±Ø§Ù‹ Ù„Ùƒ! Ø±Ù‚Ù… Ø§Ù„Ù…Ø¹Ø§Ù…Ù„Ø©: " + txid);
                },
                onCancel: (paymentId) => { document.getElementById('status').innerText = "ØªÙ… Ø§Ù„Ø¥Ù„ØºØ§Ø¡"; },
                onError: (error, payment) => { document.getElementById('status').innerText = "Ø®Ø·Ø£ ÙÙŠ Ø§Ù„Ø¯ÙØ¹"; }
            });
        } catch (err) {
            alert("ÙŠØ±Ø¬Ù‰ ÙØªØ­ Ø§Ù„Ù…ÙˆÙ‚Ø¹ Ù…Ù† Ù…ØªØµÙØ­ Pi Browser ÙÙ‚Ø·.");
        }
    }
</script>
</body>
</html>
